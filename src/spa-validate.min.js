/** @license SPA.js Validation Extension | (c) Kumararaja <sucom.kumar@gmail.com> | License (MIT) */
function _clearSpaValidateMsg(a){return spa._validate._showValidateMsg(a),!0}spa._validateDefaults={required:"Required",digits:"Digits",numbers:"Numbers",integer:"Integer",alphabet:"Alpha",alphanumeric:"AlphaNumeric",pattern:"PatternMatch",range:"ValueRange",fixedlength:"Lengths",minlength:"LengthMin",maxlength:"LengthMax",email:"Email",url:"Url",date:"Date",cardno:"CardNo",ipv4:"IPv4",ipv6:"IPv6",ipaddress:"IP",subnetmask:"Subnet",phoneUS:"PhoneUS",wordsize:"WordSize"},spa._validate={_isOnOfflineValidation:!1,_validateAlertTemplate:'<div class="errortxt error-txt break-txt" data-i18n=""></div>',_offlineValidationRules:{},_fn:{Required:function(a,t){var e=spa.getElValue(a);return spa._validate._showValidateMsg(a,t,!spa.isBlank(e))},Digits:function(a,t){var e=$(a).val(),n=0===e.length||/^\d+$/.test(e);return spa._validate._showValidateMsg(a,t,n)},Numbers:function(a,t){var e=$(a).val(),n=0===e.length||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e);return spa._validate._showValidateMsg(a,t,n)},Integer:function(a,t){var e=$(a).val(),n=0===e.length||/^-?\d+$/.test(e);return spa._validate._showValidateMsg(a,t,n)},Alpha:function(a,t){var e=$(a).val(),n=0===e.length||!/[^a-z]/gi.test(e);return spa._validate._showValidateMsg(a,t,n)},AlphaNumeric:function(a,t){var e=$(a).val(),n=0===e.length||!/[^a-z0-9]/gi.test(e);return spa._validate._showValidateMsg(a,t,n)},PatternMatch:function(a,t){var e=$(a).val(),n=0===e.length;if(!n){var i=RegExp($(a).data("validatePattern"),$(a).data("validatePatternOptions").replace(/!/g,""));n=i.test(e),$(a).data("validatePatternOptions").indexOf("!")>=0&&(n=!n)}return spa._validate._showValidateMsg(a,t,n)},ValueRange:function(a,t){var e=$(a).val(),n=0===e.length;if(!n&&(n=!1,/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e))){var i=spa.toFloat(e),l=(" "+($(a).data("validateRange")||"")+": ").split(":"),s=!spa.isBlank(l[0]),u=!spa.isBlank(l[1]),F=spa.toFloat(l[0]),d=spa.toFloat(l[1]);s&&u?n=i>=F&&d>=i:s?n=i>=F:u&&(n=d>=i)}return spa._validate._showValidateMsg(a,t,n)},LengthMin:function(a,t){var e=$(a).val(),n=spa.toInt($(a).attr("minlength")),i=e.length>=n;return spa._validate._showValidateMsg(a,t,i)},LengthMax:function(a,t){var e=$(a).val(),n=spa.toInt($(a).attr("maxlength")),i=n>=e.length;return spa._validate._showValidateMsg(a,t,i)},Lengths:function(a,t){var e=$(a).val(),n=e.length,i=spa.toInt($(a).attr("minlength")),l=spa.toInt($(a).attr("maxlength")),s=n>=i&&l>=n;return spa._validate._showValidateMsg(a,t,s)},WordSize:function(a,t){var e=$(a).val(),n=_.max(_.map((""+e).replace(/[-\n]/g," ").split(" "),function(a){return a.length})),i=spa.toInt($(a).data("validWordSize"))||20,l=i>=n;return spa._validate._showValidateMsg(a,t,l)},Email:function(a,t){var e=$(a).val(),n=0===e.length;return n||(n=(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)||/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(e))&&/[a-z0-9]/i.test(e[e.length-1])),spa._validate._showValidateMsg(a,t,n)},Url:function(a,t){var e=$(a).val(),n=0===e.length;return n||(n=/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)),spa._validate._showValidateMsg(a,t,n)},Date:function(a,t){var e=$(a).val(),n=0===e.length;if(!n){n=!1;var i,l,s,u,F=["","JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],d=["","JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"],r=$(a).data("validateFormat")||"YMD",o="^\\d{1,2}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{4}$",f=e.replace(/[^a-z]/gi,"");f&&(u=_.indexOf(F,f.toUpperCase()),0>=u&&(u=_.indexOf(d,f.toUpperCase())),u>0&&(e=e.replace(RegExp(f,"gi"),u))),e=e.replace(/[^0-9]/g," ").normalizeStr().replace(/ /g,"/");var p=e.split("/");switch(r.toUpperCase()){case"YMD":o="^\\d{4}[\\/\\-\\.]\\d{1,2}[\\/\\-\\.]\\d{1,2}$",i=p[0],l=p[1],s=p[2];break;case"MDY":l=p[0],s=p[1],i=p[2];break;case"DMY":s=p[0],l=p[1],i=p[2]}if(RegExp(o,"").test(e)){s=parseInt(s,10),l=parseInt(l,10),i=parseInt(i,10);var v=new Date(i,l-1,s);n=v.getFullYear()===i&&v.getMonth()===l-1&&v.getDate()===s}}return spa._validate._showValidateMsg(a,t,n)},CardNo:function(a,t){var e=$(a).val(),n=0===e.length;if(!n)if(/[^0-9 \-]+/.test(e))n=!1;else{for(var i=0,l=0,s=!1,u=e.replace(/\D/g,""),F=u.length-1;F>=0;F--){var d=u.charAt(F);l=parseInt(d,10),s&&(l*=2)>9&&(l-=9),i+=l,s=!s}n=0===i%10}return spa._validate._showValidateMsg(a,t,n)},IPv4:function(a,t){var e=$(a).val(),n=0===e.length;return n||(n=/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(e)&&_.every(e.split("."),function(a){return a.length>1?!a.beginsWithStr("0"):!0})),spa._validate._showValidateMsg(a,t,n)},IPv6:function(a,t){var e=$(a).val(),n=0===e.length;return n||(n=/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(e)),spa._validate._showValidateMsg(a,t,n)},IP:function(a,t){var e=$(a).val(),n=0===e.length;if(!n){var i=e,l=spa.toInt($(a).data("validateIpaddressOctates")||4)-1,s=RegExp("^(([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))\\.){"+l+"}([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))$","g");n=s.test(i)&&_.every(i.split("."),function(a){return a.length>1?!a.beginsWithStr("0"):!0}),spa._validate._showValidateMsg(a,t,n);var u=$(a).data("validateIpaddressClass");if(n&&u){var F=i.split("."),d={A:{oct1:{B:0,E:127},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:1,E:255}},B:{oct1:{B:127,E:192},oct2:{B:1,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}},C:{oct1:{B:191,E:224},oct2:{B:0,E:256},oct3:{B:1,E:256},oct4:{B:1,E:255}},D:{oct1:{B:223,E:240},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:256}},E:{oct1:{B:239,E:255},oct2:{B:0,E:256},oct3:{B:0,E:256},oct4:{B:0,E:255}}};n=1*F[0]>d[u].oct1.B&&d[u].oct1.E>1*F[0]?1*F[1]>=d[u].oct2.B&&d[u].oct2.E>1*F[1]?1*F[2]>=d[u].oct3.B&&d[u].oct3.E>1*F[2]?1*F[3]>d[u].oct4.B&&d[u].oct4.E>1*F[3]?!0:!1:!1:!1:!1,spa._validate._showValidateMsg(a,t,n)}}return n},Subnet:function(a,t){var e=$(a).val(),n=0===e.length;if(!n){var i=RegExp("^((128|192|224|240|248|252|254)\\.0\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0\\.0)|(255\\.(((0|128|192|224|240|248|252|254)\\.0)|255\\.(0|128|192|224|240|248|252|254)))))$");n=i.test(e)&&_.every(e.split("."),function(a){return a.length>1?!a.beginsWithStr("0"):!0})}return spa._validate._showValidateMsg(a,t,n)},PhoneUS:function(a,t){var e=$(a).val(),n=0===e.length;return n||(n=e.length>9&&e.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)),spa._validate._showValidateMsg(a,t,n)}},_showValidateMsg:function(a,t,e,n){t=t||"",arguments.length>2&&_.isString(e)&&(n=e),arguments.length>2&&_.isBoolean(e)&&e&&(t=""),n=n||spa._validate._validateAlertTemplate;var i=!n.beginsWithStrIgnoreCase("<");a=$($(a).data("validateMsgEl")||a).get(0);var l=i?$(n):$(a).next(),s="";if($(l).attr("class")===$(n).attr("class")||i){if(t.beginsWithStrIgnoreCase("i18n:")){var u=t.replace(/i18n:/gi,"");s="{html:'"+u+"'}",t=$.i18n.prop(u)}spa._validate._isOnOfflineValidation||($(l).data("i18n",s),$(l).html(t))}else spa.isBlank(t)||($(n).insertAfter($(a)),spa._validate._showValidateMsg(a,t,e,n));return e},expose:function(a){return a=a||{},Object.keys(spa._validateDefaults).forEach(function(t){a[t]=spa._validate._fn[spa._validateDefaults[t]]}),a}};var _check=spa._validate.expose();spa.initValidation=spa.initDataValidation=function(a){spa.console.log(">>>>> initDataValidation request for context:"+a);var t=function(a){return a=a||{},_.each(_.keys(a),function(t){t.indexOf("_")>0&&(_.each(t.split("_"),function(e){a[e]?_.isArray(a[e])?a[e].push(a[t]):a[e]=[a[e],a[t]]:a[e]=[a[t]]}),delete a[t])}),a};a=a||"body";var e=$(a),n=e.data("validateElFilter")||"",i=t(spa.toJSON(e.data("validateCommon")||"{}"));spa.console.log("keys Of commonValidateRules"),spa.console.log(_.keys(i));var l,s,u,F,d,r=(e.data("validateForm")||e.data("validateScope")||"").replace(/[^a-zA-Z0-9]/g,"");if(spa.isBlank(r)){var o=a.replace(/[^a-zA-Z0-9]/g,"");spa._validate._offlineValidationRules.hasOwnProperty(o)||(r=o)}spa.console.log("offlineValidationKey: "+r);var f=!spa.isBlank(r);f&&(spa._validate._offlineValidationRules[r]={rules:{}}),e.find(n+"[data-validate]").each(function(a,e){var n=$(e).prop("id"),o={},p=$(e).data("validate");if(p&&0>p.indexOf("{")){var v=($(e).data("validateEvents")||"onBlur").replace(/[^a-z]/gi," ").normalizeStr().replace(/ /g,"_"),c=",offline:"+($(e).data("validateOffline")||"false"),g="{fn:"+p.replace(/[,;]/," ").normalizeStr().replace(/ /g,c+"},{fn:")+c+"}";p="{"+v+":["+g+"]}"}o=t(spa.toJSON(p)),spa.console.log(p),_.each(_.keys(i),function(a){var t=i[a];_.isArray(t)||(t=[t]),t.reverse(),_.each(t,function(t){if(l=!0,s="<",F=t.offline||!1,u=!1,t.el){var e=t.el.replace(/ /g,"").split(","),i=t.el.replace(/[< >!]/g,"").split(","),r=_.indexOf(i,n);l=r>=0,l&&(s=e[r].indexOf(">")>=0?">":"<",u=e[r].indexOf("!")>=0)}else t.ex&&(l=0>_.indexOf(t.ex.replace(/[< >!]/g,"").split(","),n));l&&(d=_.omit(t,["el","ex"]),u&&(d=_.extend(d,{offline:!F})),o[a]||(o[a]=[]),o[a]="<"===s?_.union([d],o[a]):_.union(o[a],[d]))})}),_.each(_.keys(o),function(a){var t=a.substring(2,3).toLowerCase()+a.substring(3);spa.console.log("settingup event on["+t+"]..."),_.isArray(o[a])||(o[a]=[o[a]]),f&&_.each(o[a],function(a){if(a.offline){var t={fn:a.fn,msg:a.msg};spa._validate._offlineValidationRules[r].rules[n]||(spa._validate._offlineValidationRules[r].rules[n]=[]),0>_.indexOf(spa._validate._offlineValidationRules[r].rules[n],t)&&spa._validate._offlineValidationRules[r].rules[n].push(t)}}),spa.console.log("registering an event: "+a),a.beginsWithStrIgnoreCase("on")&&$(e).on(t,function(){var t,e=this;_.every(o[a],function(a){return _.isArray(a)?_.every(a,function(a){return t=a.fn,spa.is(t,"string")&&(t=spa.findSafe(window,t)),spa.is(t,"function")||console.error("data-validate-function Not Found: "+a.fn),spa.is(t,"function")?t.call(e,e,a.msg||$(e).data("validateMsg")||""):!1}):(t=a.fn,spa.is(t,"string")&&(t=spa.findSafe(window,t)),spa.is(t,"function")||console.error("data-validate-function Not Found: "+a.fn),spa.is(t,"function")?t.call(e,e,a.msg||$(e).data("validateMsg")||""):!1)})})})})},spa.validate=spa.doDataValidation=function(a,t){var e,n=a.replace(/[^a-zA-Z0-9]/g,""),i="#"+a.replace(/#/g,""),l=$(i),s={};if(spa._validate._offlineValidationRules[n]){var u=spa._validate._offlineValidationRules[n].rules,F=function(a){var t=l.find("#"+a),e=spa.toBoolean(t.data("ignoreValidationIfInvisible"))&&!t.is(":visible");return e||(e=_.every(u[a],function(a){var e=a.fn(t,a.msg);return e||(s={errcode:2,el:t,fn:a.fn,msg:a.msg}),e})),e};$.isEmptyObject(u)?s={errcode:1,errmsg:"Rules not found in scope ["+a+"]."}:(spa._validate._isOnOfflineValidation=!t,e=_.every(_.keys(u),function(a){return F(a)}),spa._validate._isOnOfflineValidation=!1)}else s={errcode:1,errmsg:"Scope not found."};return s};