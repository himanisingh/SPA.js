function _select2Copy(e,t){var n;return document.selection?(n=document.body.createTextRange(),n.moveToElementText(document.getElementById(e)),n.select()):window.getSelection&&(n=document.createRange(),n.selectNode(document.getElementById(e)),window.getSelection().removeAllRanges(),window.getSelection().addRange(n)),t&&_copyToClipboard()}function _copyToClipboard(e){if(e){var t="_copy2ClipboardHiddenTextArea_",n=document.getElementById(t);if(!n){var a=document.createElement("textarea");a.id=t,a.style.position="fixed",a.style.top=0,a.style.left=0,a.style.width="1px",a.style.height="1px",a.style.padding=0,a.style.border="none",a.style.outline="none",a.style.boxShadow="none",a.style.background="transparent",document.querySelector("body").appendChild(a),n=document.getElementById(t)}n.value=e,n.select()}var l=!1;try{l=document.execCommand("copy"),window.getSelection().removeAllRanges()}catch(e){}return l}hljs&&(hljs.formatCodesInScript=function(){$("script.code:not(.formatted)").each(function(e,t){var n=new RegExp('<span class="hljs-tag">&lt;<span class="hljs-name">hl</span>&gt;</span>',"g"),a=new RegExp('<span class="hljs-tag">&lt;/<span class="hljs-name">hl</span>&gt;</span>',"g"),l=new RegExp('<span class="hljs-tag">&lt;<span class="hljs-name">LN</span>&gt;</span>',"g"),s=new RegExp('<span class="hljs-tag">&lt;/<span class="hljs-name">LN</span>&gt;</span>',"g"),o=$(t),i=o.data(),c=o.attr("id")||((new Date).getTime()+"_"+Math.random()).replace(/[^0-9]/g,""),d=i.lang||"HTML",p=i.lineStart||"1",r=o.html().replace(/<(\/)*_(\w+)/gi,"<$1$2"),h=r.split("\n"),g=[],m="",u="";h[0].trim()||h.shift(),h[h.length-1].trim()||h.pop(),r=h.join("\n");var b,f=!new RegExp("[^0-9]","").test(p),y=f||p.indexOf("#")>=0;if(p=f?1*p:p.replace(/#/,""),h.forEach(function(e,t){b=y?f?t+p:t+1+p:p,g.push('<span class="hljs-tag line-number">'+b+"</span>")}),o.hasClass("trim")){for(var v=h[0].length,j="",w=0;w<v;w++)if(" "!=h[0][w]){j=h[0].substr(0,w);break}j.length&&(h.forEach(function(e,t){h[t]=e.replace(new RegExp("^"+j,""),"")}),r=h.join("\n"))}if(i.lines){var C;p=f?p:1,(""+i.lines).split(",").forEach(function(e){if(e.indexOf("-")>0){var t=e.split("-"),n=1*(""+(t[0]||1)).trim()-p,a=1*(""+(t[1]||h.length-1)).trim()-p;h[n]="<hl>"+h[n],h[a]=h[a]+"</hl>",g[n]='<span class="hljs-tag line-highlight">'+g[n],g[a]=g[a]+"</span>"}else C=1*e.trim()-p,h[C]="<hl>"+h[C]+"</hl>",g[C]='<span class="hljs-tag line-highlight">'+g[C]+"</span>"}),r=h.join("\n")}m=g.join("\n"),o.hasClass("line-numbers")||(u="hide");var x=hljs.highlight(d,r).value.replace(n,'<span class="hljs-tag line-highlight">').replace(a,"</span>").replace(l,'<span class="hljs-tag line-number">').replace(s,"</span>"),E=$('<button class="btn copy-code" data-code-id="'+c+'">copy</button>').on("click",function(){var e=$(this),t=e.data("codeId"),n=window.getSelection().toString(),a=n?_copyToClipboard():_select2Copy("code_"+t,!0);e.html(a?"Copied.":"Failed!"),setTimeout(function(){e.html("copy")},500)}),R=$('<button class="btn line-no '+(o.hasClass("no-num-tool")?"hide":"")+'">#</button>').on("click",function(){$(this).closest("code").find(".line-numbers-block").toggleClass("hide")}),T=$('<span class="toolbar-item" title="Copy to clipboard"></span>').append(E),_=$('<span class="toolbar-item" title="Toggle line numbers"></span>').append(R),S=$('<div class="toolbar hide"><span class="toolbar-item toolbar-title">'+(i.title||"")+"</span></div>").append(_).append(T),k=$('<code class="hljs"></code>').addClass(d).addClass(o.attr("class")).append(S).append('<table><tr><td class="line-numbers-block '+(f?"":" no-border ")+u+'">'+m+'</td><td id="code_'+c+'" class="code-block">'+x+"</td></tr></table>"),I=$("<pre></pre>").append(k).on("mouseenter",function(e){e.stopPropagation(),e.preventDefault(),$(this).find("code:not(.no-toolbar) .toolbar").removeClass("hide")}).on("mouseleave",function(e){e.stopPropagation(),e.preventDefault(),$(this).find("code:not(.no-toolbar) .toolbar").addClass("hide")});o.attr("id",c).addClass("formatted").after(I)})});